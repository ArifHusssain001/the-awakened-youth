<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results - The Awakened Youth</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="pages.css">
    <style>
        .search-results-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .search-query-info {
            background: #F5F0FF;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border: 1px solid #E6E6FF;
        }
        
        .search-query {
            color: #330066;
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .results-count {
            color: #663399;
            margin-top: 5px;
        }
        
        .search-result-card {
            background: #FFFFFF;
            border: 1px solid #E6E6FF;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: box-shadow 0.3s ease, transform 0.3s ease;
        }
        
        .search-result-card:hover {
            box-shadow: 0 4px 20px rgba(102, 51, 153, 0.1);
            transform: translateY(-2px);
        }
        
        .result-type-badge {
            display: inline-block;
            background: #E6E6FF;
            color: #330066;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 10px;
        }
        
        .result-type-badge.column {
            background: #663399;
            color: #FFFFFF;
        }
        
        .result-title {
            color: #330066;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
            text-decoration: none;
            display: block;
        }
        
        .result-title:hover {
            color: #663399;
            text-decoration: underline;
        }
        
        .result-snippet {
            color: #333333;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .result-meta {
            color: #666666;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        .read-more-link {
            background: #663399;
            color: #FFFFFF;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: background-color 0.3s ease;
            display: inline-block;
        }
        
        .read-more-link:hover {
            background: #330066;
        }
        
        .no-results {
            text-align: center;
            padding: 60px 20px;
            background: #F9F9F9;
            border-radius: 10px;
            margin: 40px 0;
        }
        
        .no-results h3 {
            color: #330066;
            margin-bottom: 15px;
        }
        
        .no-results p {
            color: #666666;
            margin-bottom: 20px;
        }
        
        .search-suggestions {
            background: #F5F0FF;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        
        .search-suggestions h4 {
            color: #330066;
            margin-bottom: 10px;
        }
        
        .search-suggestions ul {
            list-style: none;
            padding: 0;
        }
        
        .search-suggestions li {
            margin: 5px 0;
        }
        
        .search-suggestions a {
            color: #663399;
            text-decoration: none;
        }
        
        .search-suggestions a:hover {
            text-decoration: underline;
        }
        
        .new-search-bar {
            background: #FFFFFF;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #E6E6FF;
            margin-bottom: 30px;
        }
        
        .new-search-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #E6E6FF;
            border-radius: 25px;
            font-size: 1rem;
            background-color: #FFFFFF;
        }
        
        .new-search-input:focus {
            outline: none;
            border-color: #663399;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-top">
                <div class="logo">
                    <img src="images/logo.png" alt="The Awakened Youth logo" class="site-logo">
                    <h1 class="site-title">The Awakened Youth</h1>
                </div>
                <div class="search-container">
                    <div class="search-bar">
                        <input type="text" class="search-input" placeholder="Search columns, content..." id="searchInput">
                        <button class="search-btn" onclick="performSearch()" type="button">
                            <svg class="search-icon" viewBox="0 0 24 24">
                                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                            </svg>
                        </button>
                        <div class="search-results" id="searchResults"></div>
                    </div>
                </div>
                <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme" type="button" title="Toggle light / dark">ðŸŒ™</button>
            </div>
            <nav class="navigation">
                <ul class="main-nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About Me</a></li>
                    <li><a href="columns.html">Columns</a></li>
                    <li><a href="contact.html">Contact Me</a></li>
                    <li><a href="feedback.html">Feedback & Questions</a></li>
                    <li><a href="admin.html">Admin</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="page-header">
            <div class="container">
                <h2 class="page-title">Search Results</h2>
            </div>
        </section>

        <section class="content-section">
            <div class="container">
                <div class="search-results-container">
                    <div class="search-query-info">
                        <div class="search-query">Search results for: "<span id="searchQuery"></span>"</div>
                        <div class="results-count" id="resultsCount">Searching...</div>
                    </div>

                    <div class="new-search-bar">
                        <input type="text" class="new-search-input" placeholder="Try a new search..." id="newSearchInput">
                    </div>

                    <div id="searchResultsContainer">
                        <!-- Search results will be loaded here -->
                    </div>

                    <div id="noResults" class="no-results" style="display: none;">
                        <h3>No Results Found</h3>
                        <p>We couldn't find any content matching your search. Try using different keywords or browse our content below.</p>
                        
                        <div class="search-suggestions">
                            <h4>Browse Our Content:</h4>
                            <ul>
                                <li><a href="columns.html">View All Columns</a></li>
                                <li><a href="about.html">About the Writer</a></li>
                                <li><a href="contact.html">Contact Us</a></li>
                                <li><a href="feedback.html">Ask a Question</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- legacy footer removed; site-wide footer injected by js/footer.js -->

    <script src="js/search.js"></script>
    <script>
        class SearchResultsPage {
            constructor() {
                this.searchEngine = new SearchEngine();
                this.loadSearchResults();
                this.setupNewSearch();
            }

            getSearchQuery() {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get('q') || '';
            }

            loadSearchResults() {
                const query = this.getSearchQuery();
                document.getElementById('searchQuery').textContent = query;
                
                if (query.length < 2) {
                    this.showNoResults();
                    return;
                }

                // Set the search input value
                const searchInput = document.getElementById('searchInput');
                if (searchInput) {
                    searchInput.value = query;
                }

                const results = this.searchEngine.search(query);
                this.displayResults(results, query);
            }

            displayResults(results, query) {
                const container = document.getElementById('searchResultsContainer');
                const noResults = document.getElementById('noResults');
                const resultsCount = document.getElementById('resultsCount');

                if (results.length === 0) {
                    this.showNoResults();
                    return;
                }

                resultsCount.textContent = `Found ${results.length} result${results.length !== 1 ? 's' : ''}`;
                noResults.style.display = 'none';

                container.innerHTML = results.map(result => `
                    <div class="search-result-card">
                        <span class="result-type-badge ${result.type}">${result.type === 'column' ? 'Column' : 'Page'}</span>
                        <a href="${result.url}" class="result-title">${result.title}</a>
                        ${result.date ? `<div class="result-meta">Published on ${new Date(result.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</div>` : ''}
                        <div class="result-snippet">${result.snippet}</div>
                        <a href="${result.url}" class="read-more-link">Read More</a>
                    </div>
                `).join('');
            }

            showNoResults() {
                document.getElementById('resultsCount').textContent = 'No results found';
                document.getElementById('searchResultsContainer').innerHTML = '';
                document.getElementById('noResults').style.display = 'block';
            }

            setupNewSearch() {
                const newSearchInput = document.getElementById('newSearchInput');
                
                newSearchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        const query = newSearchInput.value.trim();
                        if (query.length >= 2) {
                            window.location.href = `search-results.html?q=${encodeURIComponent(query)}`;
                        }
                    }
                });
            }
        }

        // Initialize search results page
        document.addEventListener('DOMContentLoaded', function() {
            new SearchResultsPage();
        });
    </script>
    <script defer src="js/theme.js"></script>
    <script defer src="js/notifications.js"></script>
    <script defer src="js/footer.js"></script>
</body>
</html>